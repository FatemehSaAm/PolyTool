<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Penn Design Polytool</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="panel" >
        <h1>Penn Design Polytool</h1>
        <div id="githubLink">(<a href="https://github.com/immiao/PolyTool">GitHub repo</a>)</div>
        <a id="expandButton" href="#">
            <span></span>
            <span></span>
            <span></span>
        </a>
        <div id="content">
            <h2>Cells</h2>
        </div>

    </div>

    <iframe id="viewer" src="polytool.html" allowfullscreen onmousewheel=""></iframe>

    <script>
        window.onmessage = function(e){
            if (e.data == 'hi') {
                console.log('received')
                //alert('Child to Parent');
            }
        };
        var cells = ["Cell 1", "Cell 2", "Cell 3", "Cell 4"];
        var content = document.getElementById('content');
        var myIframe = document.getElementById('viewer');

        var selectedDiv = null;
        for (var i = 0; i < cells.length; i++) {
            (function(){
                var div = document.createElement("div");
                div.className = "link";
                div.textContent = cells[i];
                div.addEventListener("click", function() {
                    if (selectedDiv != null) selectedDiv.className = "link";
                    div.className = "link selected";
                    selectedDiv = div;

                    myIframe.contentWindow.postMessage('hello', '*');
                });
                content.appendChild(div);
            })();
        }
    </script>

</body>
</html>

